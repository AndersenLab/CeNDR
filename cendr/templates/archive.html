{% extends "_layouts/default.html" %}
{% block custom_head %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.js"></script>
  <link rel="stylesheet" href="/static/css/cal-heatmap.css" />
  <script src="/static/js/cal-heatmap.min.js"></script>
{% endblock %}
{% block content %}
  <div id="cal-heatmap"></div>
  <div id="graph_k"></div>
  <br></br>
  <table class="table table-hover table-striped">
  <thead>
    <tr>
      <th>Report Name</th>
      <th>Trait Name</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
  {% for i in report_data %}
      {% if i.release == 0 %}
        <tr>
          <td><a href = "{{ url_for('trait_view', report_slug = i.report_slug, trait_slug = i.trait_slug) }}">{{ i.report_name }}</a></td>
          <td><a href = "{{ url_for('trait_view', report_slug = i.report_slug, trait_slug = i.trait_slug) }}">{{ i.trait_name }}</a></td>
          <td>{{ i["submission_date"].date() }}</td>
        </tr>
      {% endif %}
  {% endfor %}
  </tbody>
</table>
{% endblock %}
{% block script %}
<script type="text/javascript">
var calendar = new CalHeatMap();
      calendar.init({
        data: {{ dates }},
        start: new Date(2016, 2),
        id : "graph_k",
        domain : "month",
        subDomain : "x_day",
        range : 7,
        cellsize: 15,
        cellpadding: 3,
        cellradius: 5,
        domainGutter: 15,
        weekStartOnMonday: 0,
        scale: [1, 2, 3, 4],
        onClick: function(x) {
          console.log(x);
        }
      });
</script>
{% endblock %}
